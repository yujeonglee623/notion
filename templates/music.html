<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YuJeong Music</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        <style>
        body {
            margin: 0; padding: 0; height: 100vh;
            display: flex; justify-content: center; align-items: center;
            background: transparent;
            font-family: 'Segoe UI', sans-serif;
        }
        
        /* ì „ì²´ í†µ í¬ê¸° ì¤„ì„ (300 -> 240) */
        .player-container {
            width: 240px; 
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 16px; /* ë‘¥ê¸€ê¸° ì‚´ì§ ì¡°ì ˆ */
            padding: 15px; /* íŒ¨ë”© ì¤„ì„ */
            box-shadow: 0 5px 20px rgba(225, 98, 89, 0.15);
            text-align: center;
            border: 2px solid #FFD9E8;
        }
        
        /* ì•¨ë²” ì»¤ë²„ í¬ê¸° ì¤„ì„ (150 -> 110) */
        .img-container {
            width: 110px; height: 110px;
            border-radius: 50%; margin: 0 auto 10px;
            position: relative;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            border: 3px solid white; overflow: hidden;
        }
        .img-container img { width: 100%; height: 100%; object-fit: cover; }
        
        /* ì• ë‹ˆë©”ì´ì…˜ì€ ê·¸ëŒ€ë¡œ */
        .rotate { animation: rotation 10s infinite linear; }
        @keyframes rotation { from { transform: rotate(0deg); } to { transform: rotate(359deg); } }
        
        /* ê¸€ì”¨ í¬ê¸° ì¤„ì„ */
        h2 { margin: 0; font-size: 0.9rem; color: #333; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        h3 { margin: 3px 0 12px; font-size: 0.7rem; color: #E16259; }
        
        /* ì§„í–‰ ë°” */
        .progress-container {
            background: #ffe3ec; border-radius: 5px; cursor: pointer;
            margin: 8px 0; height: 4px; width: 100%;
        }
        .progress {
            background-color: #E16259; border-radius: 5px;
            height: 100%; width: 0%; transition: width 0.1s linear;
        }
        
        /* ë²„íŠ¼ ì˜ì—­ */
        .controls { display: flex; justify-content: space-between; align-items: center; margin-top: 10px; padding: 0 5px; }
        
        .btn { background: none; border: none; cursor: pointer; color: #ccc; font-size: 0.9rem; transition: 0.2s; }
        .btn:hover { color: #E16259; }
        .btn.active { color: #E16259; }
        
        /* ë©”ì¸ ë²„íŠ¼ í¬ê¸° ì¤„ì„ */
        .main-controls { display: flex; align-items: center; gap: 15px; }
        .btn-big { font-size: 1.8rem; color: #E16259; }
        .btn-big:hover { transform: scale(1.1); }
    </style>
    </style>
</head>
<body>
    <div class="player-container">
        <div class="img-container" id="cover-container">
            <img src="" alt="cover" id="cover">
        </div>
        <h2 id="title">Song Title</h2>
        <h3 id="artist">Artist</h3>
        <audio id="audio"></audio>
        <div class="progress-container" id="progress-container">
            <div class="progress" id="progress"></div>
        </div>
        <div class="controls">
            <button class="btn" id="shuffle" title="Random Play"><i class="fas fa-random"></i></button>
            
            <div class="main-controls">
                <button class="btn" id="prev"><i class="fas fa-backward"></i></button>
                <button class="btn btn-big" id="play"><i class="fas fa-play"></i></button>
                <button class="btn" id="next"><i class="fas fa-forward"></i></button>
            </div>
            
            <button class="btn" style="opacity: 0; cursor: default;"><i class="fas fa-redo"></i></button>
        </div>
    </div>

    <script>
        // â­ ìœ ì •ì´ì˜ ë…¸ë˜ ëª©ë¡ (íŒŒì¼ëª… ì •í™•í•´ì•¼ í•´!)
        // ê²½ë¡œëŠ” '/static/music/íŒŒì¼ëª…' ì´ë ‡ê²Œ ì¨ì•¼ í•´
        const songs = [
            {
                title: "Carpet",
                artist: "ì¥ìš°ì˜",
                file: "/static/music/ì¥ìš°ì˜-01-Carpet.mp3", 
                cover: "/static/music/im_into.jpeg"
            },
            {
                title: "Simple Dance",
                artist: "ì¥ìš°ì˜",
                file: "/static/music/ì¥ìš°ì˜-01-Simple dance.mp3",
                cover: "/static/music/im_into.jpeg"
            },
            {
                title: "Think Too Much",
                artist: "ì¥ìš°ì˜",
                file: "/static/music/ì¥ìš°ì˜-02-Think Too Much (Feat. ë‹¤ë¯¼ì´ (DAMINI)).mp3",
                cover: "/static/music/im_into.jpeg"
            },
            {
                title: "",
                artist: "ì¥ìš°ì˜",
                file: "/static/music/ì¥ìš°ì˜-03-ëŠª.mp3",
                cover: "/static/music/im_into.jpeg"
            },
            {
                title: "Reality",
                artist: "ì¥ìš°ì˜",
                file: "/static/music/ì¥ìš°ì˜-04-Reality.mp3",
                cover: "/static/music/im_into.jpeg"
            },
            {
                title: "í™ˆìº‰ìŠ¤",
                artist: "ì¥ìš°ì˜",
                file: "/static/music/ì¥ìš°ì˜-05-í™ˆìº‰ìŠ¤.mp3",
                cover: "/static/music/im_into.jpeg"
            }
        ];

        // ğŸ‘‡ const songs = [...] ë°”ë¡œ ë°‘ì— ì´ê±¸ ë¶™ì—¬ë„£ìœ¼ë©´ ë¼!

        let songIndex = 0;
        let isShuffle = false; // ì…”í”Œ ìƒíƒœ (ì²˜ìŒì—” êº¼ì§)

        const audio = document.getElementById('audio');
        const playBtn = document.getElementById('play');
        const prevBtn = document.getElementById('prev');
        const nextBtn = document.getElementById('next');
        const shuffleBtn = document.getElementById('shuffle'); // ì…”í”Œ ë²„íŠ¼
        const title = document.getElementById('title');
        const artist = document.getElementById('artist');
        const cover = document.getElementById('cover');
        const coverContainer = document.getElementById('cover-container');
        const progress = document.getElementById('progress');
        const progressContainer = document.getElementById('progress-container');

        function loadSong(song) {
            title.innerText = song.title;
            artist.innerText = song.artist;
            audio.src = song.file;
            cover.src = song.cover;
        }

        // ì²˜ìŒ ë¡œë”©
        loadSong(songs[songIndex]);

        function playSong() {
            coverContainer.classList.add('rotate');
            playBtn.querySelector('i').classList.remove('fa-play');
            playBtn.querySelector('i').classList.add('fa-pause');
            audio.play();
        }

        function pauseSong() {
            coverContainer.classList.remove('rotate');
            playBtn.querySelector('i').classList.add('fa-play');
            playBtn.querySelector('i').classList.remove('fa-pause');
            audio.pause();
        }

        // â­ ì…”í”Œ ë²„íŠ¼ í´ë¦­ ì‹œ ë™ì‘
        shuffleBtn.addEventListener('click', () => {
            isShuffle = !isShuffle;
            if(isShuffle) {
                shuffleBtn.classList.add('active'); // í•‘í¬ìƒ‰ ì¼œê¸°
            } else {
                shuffleBtn.classList.remove('active'); // ë„ê¸°
            }
        });

        playBtn.addEventListener('click', () => {
            const isPlaying = playBtn.querySelector('i').classList.contains('fa-pause');
            if (isPlaying) pauseSong(); else playSong();
        });

        // ì´ì „ ê³¡
        prevBtn.addEventListener('click', () => {
            if (isShuffle) {
                // ì…”í”Œì¼ ë• ì´ì „ ê³¡ë„ ëœë¤ìœ¼ë¡œ (ë˜ëŠ” ê·¸ëƒ¥ ì´ì „ ì¸ë±ìŠ¤)
                songIndex = Math.floor(Math.random() * songs.length);
            } else {
                songIndex--;
                if (songIndex < 0) songIndex = songs.length - 1;
            }
            loadSong(songs[songIndex]);
            playSong();
        });

        // â­ ë‹¤ìŒ ê³¡ (ëœë¤ ë¡œì§ í•µì‹¬!)
        function nextSong() {
            if (isShuffle) {
                let newIndex;
                // í˜„ì¬ë‘ ë‹¤ë¥¸ ê³¡ì´ ë‚˜ì˜¬ ë•Œê¹Œì§€ ëœë¤ ëŒë¦¬ê¸° (ë…¸ë˜ê°€ 1ê³¡ë¿ì´ë©´ ì œì™¸)
                do {
                    newIndex = Math.floor(Math.random() * songs.length);
                } while (newIndex === songIndex && songs.length > 1);
                songIndex = newIndex;
            } else {
                songIndex++;
                if (songIndex > songs.length - 1) songIndex = 0;
            }
            loadSong(songs[songIndex]);
            playSong();
        }

        nextBtn.addEventListener('click', nextSong);

        // ì§„í–‰ ë°” ì—…ë°ì´íŠ¸
        audio.addEventListener('timeupdate', (e) => {
            const { duration, currentTime } = e.srcElement;
            const progressPercent = (currentTime / duration) * 100;
            progress.style.width = `${progressPercent}%`;
        });

        // ì§„í–‰ ë°” í´ë¦­ ì´ë™
        progressContainer.addEventListener('click', (e) => {
            const width = progressContainer.clientWidth;
            const clickX = e.offsetX;
            const duration = audio.duration;
            audio.currentTime = (clickX / width) * duration;
        });

        // â­ ë…¸ë˜ ëë‚˜ë©´ ë‹¤ìŒ ê³¡ (ì…”í”Œ ìƒíƒœ ë°˜ì˜)
        audio.addEventListener('ended', nextSong);
    </script>
</body>
</html>
