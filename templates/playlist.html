<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Player</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body {
            margin: 0; padding: 0; height: 100vh;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            background: transparent;
            font-family: 'Segoe UI', sans-serif;
        }
        
        .player-container {
            width: 240px; 
            background: rgba(255, 255, 255, 0.95);
            border-radius: 16px;
            padding: 15px;
            text-align: center;
            border: 2px solid #FFD9E8;
            margin-bottom: 10px;
        }

        .img-container {
            width: 110px; height: 110px;
            border-radius: 50%; margin: 0 auto 10px;
            overflow: hidden; border: 3px solid white;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        .img-container img { width: 100%; height: 100%; object-fit: cover; }
        .rotate { animation: rotation 10s infinite linear; }
        @keyframes rotation { from { transform: rotate(0deg); } to { transform: rotate(359deg); } }

        /* ë””ë²„ê¹…ìš© ë©”ì‹œì§€ ì°½ */
        #debug-msg {
            font-size: 0.7rem; color: red; 
            background: #fff0f0; padding: 5px; 
            border-radius: 4px; margin-top: 5px;
            display: none; /* ì—ëŸ¬ ì—†ìœ¼ë©´ ìˆ¨ê¹€ */
        }

        /* â­ ìœ íŠœë¸Œ í™”ë©´ì„ ë³´ì´ê²Œ ì„¤ì • (ì‘ê²Œ) */
        #yt-player {
            width: 200px; height: 150px; /* ëˆˆì— ë³´ì´ê²Œ í¬ê¸° í‚¤ì›€ */
            border: 2px solid red; /* ìœ„ì¹˜ í™•ì¸ìš© ë¹¨ê°„ í…Œë‘ë¦¬ */
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="player-container">
        <div class="img-container" id="cover-container">
            <img src="https://via.placeholder.com/150" alt="cover" id="cover">
        </div>
        
        <h2 id="title">Loading...</h2>
        
        <div class="controls" style="margin-top: 10px; display: flex; justify-content: center; gap: 15px;">
            <i class="fas fa-backward" id="prev" style="cursor:pointer;"></i>
            <i class="fas fa-play" id="play" style="font-size: 1.5rem; color:#E16259; cursor:pointer;"></i>
            <i class="fas fa-forward" id="next" style="cursor:pointer;"></i>
        </div>

        <div id="debug-msg"></div>
    </div>

    <div id="yt-player"></div>

    <script>
        // ğŸ‘‡ í…ŒìŠ¤íŠ¸ìš© ë””ì¦ˆë‹ˆ í”Œë¦¬ (ì´ê±´ 100% ë¨)
        const PLAYLIST_ID = "PLwNuT9q3Y2siGjjg3D9goxnOVMtDJv69K"; 
        // ë§Œì•½ ìœ ì •ì´ í”Œë¦¬ë¡œ í…ŒìŠ¤íŠ¸í•˜ë ¤ë©´ ì•„ë˜ ì£¼ì„ í’€ê³  ID ë„£ê¸°
        // const PLAYLIST_ID = "ìœ ì •ì´_í”Œë¦¬_ID"; 

        let player;
        const playBtn = document.getElementById('play');
        const debugEl = document.getElementById('debug-msg');

        var tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        function onYouTubeIframeAPIReady() {
            log("ìœ íŠœë¸Œ API ë¡œë“œë¨. í”Œë ˆì´ì–´ ìƒì„± ì¤‘...");
            player = new YT.Player('yt-player', {
                height: '150', width: '200',
                playerVars: {
                    'listType': 'playlist',
                    'list': PLAYLIST_ID,
                    'playsinline': 1,
                    'origin': window.location.origin
                },
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange,
                    'onError': onPlayerError
                }
            });
        }

        function onPlayerReady(event) {
            log("í”Œë ˆì´ì–´ ì¤€ë¹„ ì™„ë£Œ! ì¬ìƒ ë²„íŠ¼ì„ ëˆŒëŸ¬ë³´ì„¸ìš”.");
            updateInfo();
        }

        function onPlayerStateChange(event) {
            if (event.data == 1) { // ì¬ìƒ ì¤‘
                log("ìƒíƒœ: ì¬ìƒ ì¤‘ ğŸµ");
                document.getElementById('cover-container').classList.add('rotate');
                updateInfo();
            } else if (event.data == 2) { // ì¼ì‹œì •ì§€
                log("ìƒíƒœ: ì¼ì‹œì •ì§€ â¸ï¸");
                document.getElementById('cover-container').classList.remove('rotate');
            }
        }

        function onPlayerError(event) {
            let msg = "ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜";
            if(event.data == 150 || event.data == 101) msg = "í¼ê°€ê¸° ê¸ˆì§€ëœ ì˜ìƒì…ë‹ˆë‹¤! (ì¬ìƒ ë¶ˆê°€)";
            else if(event.data == 100) msg = "ì˜ìƒì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤ (ì‚­ì œë¨)";
            
            log("ğŸš¨ ì—ëŸ¬ ë°œìƒ: " + msg + " (ì½”ë“œ: " + event.data + ")");
            alert(msg); // íŒì—…ìœ¼ë¡œë„ ë„ì›€
        }

        function updateInfo() {
            if(!player || !player.getVideoData) return;
            const data = player.getVideoData();
            document.getElementById('title').innerText = data.title || "ì œëª© ì—†ìŒ";
            document.getElementById('cover').src = `https://img.youtube.com/vi/${data.video_id}/mqdefault.jpg`;
        }

        playBtn.addEventListener('click', () => {
            if(!player) return;
            const state = player.getPlayerState();
            if(state == 1) player.pauseVideo();
            else player.playVideo();
        });

        document.getElementById('next').addEventListener('click', () => player.nextVideo());
        document.getElementById('prev').addEventListener('click', () => player.previousVideo());

        function log(msg) {
            debugEl.style.display = 'block';
            debugEl.innerText = msg;
            console.log(msg);
        }
    </script>
</body>
</html>
